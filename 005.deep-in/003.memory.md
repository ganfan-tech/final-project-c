# C Program Memory

全局变量

局部变量 / 形式参数

变量的存储类型分为静态存储变量、动态存储变量

- 静态存储方式：在程序运行期间分配固定的存储空间的方式。
- 动态存储方式：在程序运行期间根据需要进行动态的分配存储空间的方式。

程序代码区
静态存储区
动态存储区

全局变量（在函数的外部定义的）放在静态存储区中，程序开始执行时给全局变量分配存储区，程序执行完毕后释放这些存储区。在程序执行过程中它们占据固定的存储单元，而不是动态地分配和释放。

那么动态存储区中存储哪些数据呢？
（1）函数形参，前面说过，函数形参被看作局部变量。
（2）局部变量，如函数内定义的一些变量。
（3）函数调用时调用现场的一些数据和返回地址等。
一般来说，这些数据在函数调用开始时分配存储空间，函数调用完毕后这些空间就被释放掉了（也称为回收）。这种分配和释放就认为是动态的，如果两次调用同一个函数，分配给此函数的局部变量的存储空间地址可能是不同的。

在静态存储区的分配的存储单元，程序运行期间不会释放

## static 的作用

局部静态变量 函数内定义的局部变量前 加上 static 关键字，就变成了局部静态变量。它是在编译时赋初值的，只赋值一次。每次函数调用时，不会再次赋值，而是保留上一次运行的状态。如非必要，不要使用局部静态变量。

内部全局变量，全局变量的定义前加上 static 关键字，全局变量只作用于本文件的全局变量。这样可以在多个文件中声明同名的全局变量而不影响其他文件。

内部函数 static 加在函数定义前，函数就变成了内部函数，不能被外部文件调用。
